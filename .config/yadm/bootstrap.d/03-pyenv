#!/bin/bash

pyenv_version=v2.2.4
pyenv_repo=https://github.com/pyenv/pyenv.git
pyenv_install_path=$HOME/.pyenv

# install dependencies
sudo apt install -y \
  build-essential \
  libssl-dev \
  zlib1g-dev \
  libbz2-dev \
  libreadline-dev \
  libsqlite3-dev \
  wget \
  curl \
  llvm \
  libncurses5-dev \
  libncursesw5-dev \
  xz-utils \
  tk-dev \
  libffi-dev \
  liblzma-dev \
  git


if [ -d "$pyenv_install_path" ]; then
  cd ${pyenv_install_path} && git fetch -p && git co tags/$pyenv_version && cd -
  cd ${pyenv_install_path}/plugins/pyenv-virtualenv && git fetch -p && git pull --rebase origin master && cd -
else
  git clone $pyenv_repo $pyenv_install_path -b $pyenv_version
  git clone https://github.com/pyenv/pyenv-virtualenv.git $pyenv_install_path/plugins/pyenv-virtualenv
fi
